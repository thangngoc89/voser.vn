System.register(["./db-legacy-30cedf1f.js","./db_calls-legacy-ad43cccb.js","./pocketbase-legacy-30e6144f.js","./index-legacy-9722a870.js"],(function(e,t){"use strict";var r,a,s,o;return{setters:[e=>{r=e.d},e=>{a=e.l},e=>{s=e.i},e=>{o=e.j}],execute:function(){const t=e("defaultLimit",25);function n(e,t){const r=function(e,t){return t.get(e)}(e,t);return r&&parseInt(r)||null}function c(e){switch(e){case"mau_giao":return"mau_giao_form";case"tieu_hoc":return"tieu_hoc_form";case"nguoi_lon":return"nguoi_lon_form";case"who_children_surface":return"who_children_surface_form";case"research_coidp":return"research_coidp_form"}}e("loader",(async({request:e,params:i})=>{const u=new URL(e.url),l=Math.max(n("offset",u.searchParams)||0,0),_=Math.max(n("limit",u.searchParams)||t,10),[f,h]=await Promise.all([r.list.orderBy("createdAt").reverse().offset(l).limit(_).toArray(),r.list.count()]),m=[];for(const t of f){const e=await a(t.surveyId,c(t.surveyType));if(e){const r=e?.data?.ho_va_ten,a=e?.data?.nguoi_kham;let s={...t,extra:{ho_va_ten:r,nguoi_kham:a}};m.push(s)}else m.push({...t,extra:{}})}return o({list:m,count:h,offset:l,limit:_,auth:s()})}))}}}));
