System.register(["./schema_loader-legacy-a717d58f.js","./index-legacy-f5cb693b.js","./db_calls-legacy-123a5513.js","./survey-edit--loader-legacy-15bbaa4f.js","./index-legacy-a6b9922c.js","./tieu_hoc_child_oidp-legacy-8c5c0e37.js","./db-legacy-1802c10b.js"],(function(e,a){"use strict";var s,t,r,l,n;return{setters:[e=>{s=e.i},e=>{t=e.f},e=>{r=e.l},e=>{l=e.loaderSurveyDataAndSchema},e=>{n=e.j},null,null],execute:function(){const a=e=>{const{survey:a}=e;let s={};return a.forEach((e=>{o(e,s)})),s};function o(e,a){switch(e.type){case"date":if(e.defaultValue){const s=e.defaultValue;if("now()"==s.value){const r=s.format||"dd-MM-yyyy";a[e.name]=t(new Date,r)}}break;case"group":e.fields.forEach((e=>{o(e,a)}))}}e("loader",(async({request:e,params:t})=>{s(t.formName);const{survey:o,surveySchema:u}=await l(t),c=u.forms.find((({form:e})=>e.name===t.formName));if(null==c)throw new Response(`Form ${t.formName} isn't available`,{status:400,statusText:"Unknown form name"});const m=await r(o.surveyId,t.formName),i=c.makeInitialValues?c.makeInitialValues():a(c.form);return n({formSchema:c,survey:o,formData:m||null,defaultValues:i})}))}}}));
