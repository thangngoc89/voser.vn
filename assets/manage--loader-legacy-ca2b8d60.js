System.register(["./db-legacy-1802c10b.js","./db_calls-legacy-123a5513.js","./pocketbase-legacy-d584ed5d.js","./index-legacy-2e08a974.js"],(function(e,t){"use strict";var a,r,s,n;return{setters:[e=>{a=e.d},e=>{r=e.l},e=>{s=e.i},e=>{n=e.j}],execute:function(){const t=e("defaultLimit",25);function o(e,t){const a=function(e,t){return t.get(e)}(e,t);return a&&parseInt(a)||null}function c(e){switch(e){case"mau_giao":return"mau_giao_form";case"tieu_hoc":return"tieu_hoc_form";case"nguoi_lon":return"nguoi_lon_form";case"who_children_surface":return"who_children_surface_form"}}e("loader",(async({request:e,params:u})=>{const i=new URL(e.url),l=Math.max(o("offset",i.searchParams)||0,0),f=Math.max(o("limit",i.searchParams)||t,10),[_,m]=await Promise.all([a.list.orderBy("createdAt").reverse().offset(l).limit(f).toArray(),a.list.count()]),h=[];for(const t of _){const e=await r(t.surveyId,c(t.surveyType));if(e){const a=e?.data?.ho_va_ten,r=e?.data?.nguoi_kham;let s={...t,extra:{ho_va_ten:a,nguoi_kham:r}};h.push(s)}else h.push({...t,extra:{}})}return n({list:h,count:m,offset:l,limit:f,auth:s()})}))}}}));
