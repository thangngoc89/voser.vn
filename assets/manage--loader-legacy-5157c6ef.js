System.register(["./index-legacy-c8c631e2.js","./db_calls-legacy-49525fbd.js"],(function(t,e){"use strict";var a,r,s,o;return{setters:[t=>{a=t.d,r=t.j,s=t.p},t=>{o=t.l}],execute:function(){const e=t("defaultLimit",25);function n(t,e){const a=function(t,e){return e.get(t)}(t,e);return a&&parseInt(a)||null}function u(t){switch(t){case"mau_giao":return"mau_giao_form";case"tieu_hoc":return"tieu_hoc_form";case"nguoi_lon":return"nguoi_lon_form"}}t("loader",(async({request:t,params:i})=>{const c=new URL(t.url),l=Math.max(n("offset",c.searchParams)||0,0),m=Math.max(n("limit",c.searchParams)||e,10),[f,_]=await Promise.all([a.list.orderBy("createdAt").reverse().offset(l).limit(m).toArray(),a.list.count()]),h=[];for(const e of f){const t=await o(e.surveyId,u(e.surveyType));if(t){const a=t?.data?.ho_va_ten,r=t?.data?.nguoi_kham;let s={...e,extra:{ho_va_ten:a,nguoi_kham:r}};h.push(s)}else h.push({...e,extra:{}})}return r({list:h,count:_,offset:l,limit:m,auth:s.authStore?.model})}))}}}));
