(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"2id+":function(t,e){"use strict";e.a={main:"main__1K-lV"}},"9L1P":function(t,e,r){"use strict";r.r(e),function(t){function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return u(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function c(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}var l=r("7SJd"),s=r("lm/3"),f=r("W8jr"),p=r("UTjy"),y=r("9j8Y"),d=r("eucj"),h=function(t){switch(t){case"mau_giao":return"mau_giao_form";case"tieu_hoc":return"tieu_hoc_form";case"nguoi_lon":return"nguoi_lon_form"}},v=function(){var t,e=(t=function*(t,e){var r,n=[],i=a(yield l.b.list.orderBy("createdAt").reverse().offset(t).limit(e).toArray());try{for(i.s();!(r=i.n()).done;){var u=r.value,c=yield Object(d.b)(u.surveyId,h(u.surveyType)),s=c&&c.data&&c.data.ho_va_ten,f=o(o({},u),{},{name:s});n.push(f)}}catch(t){i.e(t)}finally{i.f()}return n},function(){var e=this,r=arguments;return new Promise((function(n,o){function i(t){c(u,n,o,i,a,"next",t)}function a(t){c(u,n,o,i,a,"throw",t)}var u=t.apply(e,r);i(void 0)}))});return function(t,r){return e.apply(this,arguments)}}();e.default=function(e){var r=e.pageSize,n=parseInt(e.skip,10)||0,o=parseInt(r,10)||50,i=Object(s.a)(v,[n,o]);return i.loading?t("div",{className:"wrapper"},t(f.a,null)):i.error?(console.error(i.error),t("div",{className:"wrapper"},t(p.a,{title:"Có lỗi xảy ra",explain:i.error.message}))):i.result?t(y.a,{surveys:i.result,offset:n,limit:o}):t("div",{className:"wrapper"},t(p.a,{title:"Có lỗi xảy ra",explain:"Trường hợp này không hiểu tại sao xảy ra. quan-li.tsx:63"}))}}.call(this,r("hosL").h)},"9j8Y":function(t,e,r){"use strict";(function(t){function n(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function o(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){function a(t){n(c,o,i,a,u,"next",t)}function u(t){n(c,o,i,a,u,"throw",t)}var c=t.apply(e,r);a(void 0)}))}}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function u(t){return c.apply(this,arguments)}function c(){return(c=o((function*(t){switch(t.type){case"survey":yield h.b.list.update(t.payload.surveyId,{syncStatus:h.a.Synced});break;case"surveyData":yield h.b.data.update([t.payload.surveyId,t.payload.surveyForm],{syncStatus:h.a.Synced});break;case"surveyRevision":yield h.b.revision.update(t.payload.surveyDataId,{syncStatus:h.a.Synced})}}))).apply(this,arguments)}r.d(e,"a",(function(){return S}));var l,s=r("pFNu"),f=r("l8WD"),p=r("QVZW"),y=r("lm/3"),d=r("ox/y"),h=r("7SJd"),v=r("eucj"),b=r("fkj1"),m=r("wGtP"),g=r("o7/e"),w=r("q/Mr"),O=r("eANb"),j=r("RKBc");!function(t){t[t.Initial=0]="Initial",t[t.PrepareData=1]="PrepareData",t[t.Uploading=2]="Uploading",t[t.Done=3]="Done"}(l||(l={}));var S=function(e){var r=e.surveys,n=e.offset,a=e.limit,c=i(Object(f.useState)(0),2),S=c[0],P=c[1],A=i(Object(f.useState)(0),2),E=A[0],_=A[1],k=i(Object(f.useState)(l.Initial),2),T=k[0],D=k[1],I=Object(w.a)(),N=Object(y.b)(o((function*(){try{var t=[];D(l.PrepareData),yield Promise.all([h.b.list.where({syncStatus:h.a.NotSync}).each((function(e){t.push({type:"survey",payload:e})})),h.b.data.where({syncStatus:h.a.NotSync}).each((function(e){t.push({type:"surveyData",payload:e})})),h.b.revision.where({syncStatus:h.a.NotSync}).each((function(e){t.push({type:"surveyRevision",payload:e})}))]),_(0),P(t.length),D(l.Uploading);for(var e=0;e<t.length;e++){var r=t[e];yield Object(b.a)(r,I),yield u(r),_((function(t){return t+1}))}D(l.Done),E===S?g.b.success("Đồng bộ dữ liệu thành công"):g.b.warn("Có lỗi xảy ra khi đồng bộ. Chỉ đồng bộ được ".concat(E,"/").concat(S," hồ sơ"))}catch(t){console.error(t),g.b.error("Có lỗi xảy ra khi đồng bộ dữ liệu")}})));return t("div",{className:s.a.wrapper},t("header",{className:s.a.header},t("h1",null,"Quản lí hồ sơ"),t(p.Button,{type:"button",secondary:!0,onClick:N.execute,disabled:N.loading},"Đồng bộ")),T===l.PrepareData&&t("div",{className:s.a.syncStatus},'"Đang tìm dữ liệu...."'),T===l.Uploading&&t("div",{className:s.a.syncStatus},t("span",null,"Tải dữ liệu lên ",E,"/",S)),T===l.Done&&t("div",{className:s.a.syncStatus},t("span",null,"Đồng bộ thành công")),t(O.a,{offset:n,limit:a}),t(p.Table,{bordered:!0,fullWidth:!0},t("thead",null,t("tr",null,t("th",{scope:"col"},"Mã số"),t("th",{scope:"col"},"Loại hồ sơ"),t("th",{scope:"col"},"Tên"),t("th",{scope:"col"},"Thời gian tạo"),t("td",null))),t("tbody",null,r.map((function(e){var r,n=e.surveyId,i=e.surveyType,a=e.name,u=e.createdAt;return t("tr",{key:n},t("td",null,n),t("td",null,i),t("td",null,a),t("td",null,(r=u,Object(m.a)(new Date(r),"dd-MM-yyyy hh:mm:ss"))),t("td",null,t(d.Link,{href:"/survey/".concat(n)},t(p.Button,{type:"button"},"Xem")),t(p.Button,{type:"button",outline:!0,onClick:function(){var t=o((function*(){var t=function(t){switch(t){case"mau_giao":return["mau_giao_form"];case"tieu_hoc":return["tieu_hoc_form","tieu_hoc_questionare","tieu_hoc_child_oidp"];case"nguoi_lon":return["nguoi_lon_form","nguoi_lon_questionare","nguoi_lon_ohip14"]}}(i),e=[];for(var r in t){var o=yield Object(v.b)(n,t[r]);e.push(o)}var u=new Blob([JSON.stringify({surveyId:n,surveyType:i,surveyData:e})],{type:"text/plain;charset=utf-8"});Object(j.saveAs)(u,"".concat(a,"_").concat(n,".voser"))}));return function(e){return t.apply(this,arguments)}}()},"Tải về")))})))),t(O.a,{offset:n,limit:a}))}}).call(this,r("hosL").h)},RKBc:function(t,e,r){(function(r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var o,i;o=function(){"use strict";function e(t,e){return void 0===e?e={autoBom:!1}:"object"!=n(e)&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function o(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){l(n.response,e,r)},n.onerror=function(){console.error("could not download file")},n.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function a(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(r){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var u="object"==("undefined"==typeof window?"undefined":n(window))&&window.window===window?window:"object"==("undefined"==typeof self?"undefined":n(self))&&self.self===self?self:"object"==(void 0===r?"undefined":n(r))&&r.global===r?r:void 0,c=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),l=u.saveAs||("object"!=("undefined"==typeof window?"undefined":n(window))||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(t,e,r){var n=u.URL||u.webkitURL,c=document.createElement("a");c.download=e=e||t.name||"download",c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?a(c):i(c.href)?o(t,e,r):a(c,c.target="_blank")):(c.href=n.createObjectURL(t),setTimeout((function(){n.revokeObjectURL(c.href)}),4e4),setTimeout((function(){a(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,r,n){if(r=r||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,n),r);else if(i(t))o(t,r,n);else{var u=document.createElement("a");u.href=t,u.target="_blank",setTimeout((function(){a(u)}))}}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof t)return o(t,e,r);var i="application/octet-stream"===t.type,a=/constructor/i.test(u.HTMLElement)||u.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||i&&a||c)&&"undefined"!=typeof FileReader){var s=new FileReader;s.onloadend=function(){var t=s.result;t=l?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=t:location=t,n=null},s.readAsDataURL(t)}else{var f=u.URL||u.webkitURL,p=f.createObjectURL(t);n?n.location=p:location.href=p,n=null,setTimeout((function(){f.revokeObjectURL(p)}),4e4)}});u.saveAs=l.saveAs=l,t.exports=l},void 0===(i="function"==typeof o?o.apply(e,[]):o)||(t.exports=i)}).call(this,r("pCvA"))},eANb:function(t,e,r){"use strict";(function(t){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}r.d(e,"a",(function(){return s}));var i=r("l8WD"),a=r("7SJd"),u=r("UTjy"),c=r("Y3FI"),l=r("2id+"),s=function(e){var r=e.offset,o=e.limit,s=n(Object(i.useState)({type:"initial"}),2),f=s[0],p=s[1];switch(Object(i.useEffect)((function(){a.b.list.count().then((function(t){return p({type:"success",payload:t})})).catch((function(t){console.error(t),p({type:"error",payload:t.message})}))}),[]),f.type){case"initial":case"loading":return null;case"success":var y=f.payload,d=Math.ceil(y/o),h=Math.floor(r/o)+1;return t("div",{className:l.a.main},t("button",{type:"button",onClick:function(t){t.preventDefault(),Object(c.route)("/quan_li/".concat((h-2)*o,"/").concat(o))},disabled:h<=1},"Trang trước ←"),t("span",null,"Trang ",h,"/",d," (",y," hồ sơ tất cả)"),t("button",{type:"button",onClick:function(t){t.preventDefault(),Object(c.route)("/quan_li/".concat(h*o,"/").concat(o))},disabled:h>=d},"Trang tiếp →"));case"error":return t("div",{className:"wrapper"},t(u.a,{title:"Đã có lỗi xảy ra",explain:f.payload}))}}}).call(this,r("hosL").h)},fkj1:function(t,e,r){"use strict";function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function o(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?n(Object(r),!0).forEach((function(e){i(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function a(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function l(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){return"number"==typeof t&&!isNaN(t-t)}function p(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return y(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(t){return t.trim().replace(/^\/?/,"").replace(/\/?$/,"")}function v(t,e){return"string"==typeof e&&""!==e&&h(e).split("/").length%2==("doc"===t?0:1)}function b(t,e){return e instanceof At&&("doc"===t?!e.isCollection:e.isCollection)}function m(t){var e,r,n,o;if(!function(t){return t instanceof At||t instanceof gt||"string"==typeof t}(t))throw TypeError("Expected a Reference, Document or a path but got something else");return null!==(o=null!==(n=null===(r=null===(e=t)||void 0===e?void 0:e.__meta__)||void 0===r?void 0:r.path)&&void 0!==n?n:t.path)&&void 0!==o?o:h(t)}function g(t,e){var r="doc"===t,n=m(e);if(!v(t,n))throw TypeError("You are trying to access a method reserved for ".concat(r?"Documents":"Collections"," with a ").concat(r?"Collection":"Document"));return n}function w(t){return Number.isInteger(t)&&t>=0}function O(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,r=[],n=encodeURIComponent,o=function(o){if(void 0===t[o])return"continue";var i=e?"".concat(e,".").concat(o):o;if(Array.isArray(t[o]))return t[o].forEach((function(t){r.push("".concat(i,"=").concat(n(t)))})),"continue";if("object"===d(t[o])){var a=O(t[o],i);return a&&r.push(a),"continue"}r.push("".concat(i,"=").concat(n(t[o])))};for(var i in t)o(i);return(!e&&r.length?"?":"")+r.join("&")}function j(t,e){var r=[];for(var n in t)if(!(t[n]instanceof mt)){var o=e?"".concat(e,".").concat(n):n;null===t[n]||"object"!==d(t[n])||Array.isArray(t[n])||t[n]instanceof Date?r.push(o):r=r.concat(j(t[n],o))}return r}function S(t,e){for(var r={},n=0,o=Object.entries(t);n<o.length;n++){var i=p(o[n],2),a=i[0],u=i[1];if(void 0!==u)switch(a){case"exists":case"updateTime":r.currentDocument||(r.currentDocument={}),r.currentDocument[a]=u;break;case"updateMask":if(!e)break;u&&(r.updateMask={fieldPaths:j(e)});break;case"mask":r.mask={fieldPaths:u};break;default:r[a]=u}}return r}function P(t,e){var r=Object.keys(t)[0];switch(t=t[r],r){case"integerValue":return Number(t);case"arrayValue":return t.values?t.values.map((function(t){return P(t,e)})):[];case"mapValue":return A(t,e);case"timestampValue":return new Date(t);case"referenceValue":return new At(t.replace(e.rootPath,""),e);case"geoPointValue":return new vt(t.latitude,t.longitude);case"stringValue":case"doubleValue":case"booleanValue":case"nullValue":case"bytesValue":return t}throw Error('Invalid Firestore value_type "'.concat(r,'"'))}function A(t,e){if(void 0===e)throw Error('Argument "db" is required but missing');var r={};for(var n in t.fields)r[n]=P(t.fields[n],e);return r}function E(t,e,r){var n=Object.prototype.toString.call(t),o=n.substring(8,n.length-1).toLowerCase()+"Value";switch(o){case"numberValue":t="integerValue"===(o=Number.isInteger(t)?"integerValue":"doubleValue")?String(t):t;break;case"arrayValue":t=t.length?{values:t.map(E)}:{};break;case"dateValue":o="timestampValue",t=t.toISOString();break;case"objectValue":if(t instanceof At||t instanceof vt)return t.toJSON();o="mapValue",t=_(t,e,r)}return function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}({},o,t)}function _(t,e,r){var n=Object.keys(t);if(0===n.length)return{};for(var o={fields:{}},i=0,a=n;i<a.length;i++){var u=a[i];if(void 0!==t[u]){var c=t[u],l=r?"".concat(r,".").concat(u):u;c instanceof mt?(c.fieldPath=l,e&&e.push(c)):o.fields[u]=E(c,e,l)}}return o}function k(){var t=crypto.getRandomValues(new Uint8Array(20));return Array.from(t).map((function(t){return"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ01234567890"[t%63]})).join("")}function T(){return T=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},T.apply(this,arguments)}function D(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function I(t,e,r){return e&&D(t.prototype,e),r&&D(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function N(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function C(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function R(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=U(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){u=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(u)throw i}}}}function L(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,u=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){u=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(u)throw o}}return i}(t,e)||U(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(t,e){if(t){if("string"==typeof t)return V(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?V(t,e):void 0}}function V(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function M(t){if(!Array.isArray(t)||3!==t.length)throw Error("Filter missing arguments");var e=L(t,3),r=e[1],n=e[2];if("string"!=typeof e[0])throw Error("Invalid field path");if(!(r in wt))throw Error("Invalid operator");if((null===n||Number.isNaN(n))&&"=="!==t[1])throw Error("Null and NaN can only be used with the == operator");if(void 0===n)throw Error("Invalid comparative value")}function B(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function F(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function J(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?q(Object(r),!0).forEach((function(e){G(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function G(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function H(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function $(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){function i(t){H(u,n,o,i,a,"next",t)}function a(t){H(u,n,o,i,a,"throw",t)}var u=t.apply(e,r);i(void 0)}))}}function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Y(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function W(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){function i(t){Y(u,n,o,i,a,"next",t)}function a(t){Y(u,n,o,i,a,"throw",t)}var u=t.apply(e,r);i(void 0)}))}}function K(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function z(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?K(Object(r),!0).forEach((function(e){X(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function X(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Z(t){return Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Z(t)}function tt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function et(){return et=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},et.apply(this,arguments)}function rt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function nt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(r),!0).forEach((function(e){ot(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ot(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function it(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function at(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function ut(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){function i(t){at(u,n,o,i,a,"next",t)}function a(t){at(u,n,o,i,a,"throw",t)}var u=t.apply(e,r);i(void 0)}))}}function ct(){return lt.apply(this,arguments)}function lt(){return(lt=ut((function*(t){if(!t.ok){var e=yield t.json();if(Array.isArray(e))throw 1===e.length?et(new Error,e[0].error):e;throw et(new Error,e.error)}return t.json()}))).apply(this,arguments)}function st(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ft(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?st(Object(r),!0).forEach((function(e){pt(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):st(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pt(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function yt(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)e.indexOf(r=i[n])>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)e.indexOf(r=i[n])>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function dt(t,e,r,n,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void r(t)}u.done?e(c):Promise.resolve(c).then(n,o)}function ht(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){function i(t){dt(u,n,o,i,a,"next",t)}function a(t){dt(u,n,o,i,a,"throw",t)}var u=t.apply(e,r);i(void 0)}))}}r.d(e,"a",(function(){return Ct}));var vt=function(){function t(t,e){if(this.latitude=t,this.longitude=e,"number"!=typeof t)throw Error("The latitude argument should be of type number");if("number"!=typeof t)throw Error("The longitude argument should be of type number");if(t>=90||t<=-90)throw Error("GeoPoint's latitude should be within the range of -90.0 and 90.0");if(e>=180||e<=-180)throw Error("GeoPoint's longitude should be within the range of -180.0 and 180.0")}var e,r,n;return e=t,(r=[{key:"toJSON",value:function(){return{geoPointValue:o({},this)}}}])&&a(e.prototype,r),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),bt={serverTimestamp:["setToServerValue"],increment:["increment",f],max:["maximum",f],min:["minimum",f],appendToArray:["appendMissingElements",Array.isArray],removeFromArray:["removeAllFromArray",Array.isArray]},mt=s((function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!(e in bt))throw Error('Invalid transform name: "'.concat(e,'"'));var n=u(bt[e],2),o=n[0],i=n[1];if(i&&!i(r))throw Error('The value for the transform "'.concat(e,'" needs to be a').concat(i===f?" number":"n array","."));this[o]=i===Array.isArray?E(r).arrayValue:"serverTimestamp"===e?"REQUEST_TIME":E(r)})),gt=I((function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===r)throw Error('Argument "db" is required but missing');var n=e.name,o={db:r,name:n,createTime:e.createTime,updateTime:e.updateTime,path:n.replace(r.rootPath,""),id:n.split("/").pop()};Object.defineProperty(this,"__meta__",{value:o}),T(this,A(e,r))})),wt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL",contains:"ARRAY_CONTAINS","contains-any":"ARRAY_CONTAINS_ANY",in:"IN"},Ot={select:function(t){var e=t.map((function(t){return{fieldPath:t}}));return e.length?{fields:e}:void 0},encodeFilter:function(t){var e=L(t,3),r=e[0],n=e[1],o=e[2];return Number.isNaN(o)||null===o?{unaryFilter:{field:{fieldPath:r},op:Number.isNaN(o)?"IS_NAN":"IS_NULL"}}:{fieldFilter:{field:{fieldPath:r},op:wt[n],value:E(o)}}},where:function(t){if(0!==t.length)return 1===t.length?this.encodeFilter(t[0]):{compositeFilter:{op:"AND",filters:t.map(this.encodeFilter)}}},orderBy:function(t,e){var r,n,o;return(e.startAt||e.endAt)&&"__name__"!==(null===(r=t[t.length-1])||void 0===r?void 0:r.field.fieldPath)&&t.push({field:{fieldPath:"__name__"},direction:null!==(o=null===(n=t[t.length-1])||void 0===n?void 0:n.direction)&&void 0!==o?o:"ASCENDING"}),t},documentToCursor:function(t,e){var r,n=[],o=R(e.orderBy);try{for(o.s();!(r=o.n()).done;){var i=r.value;if("__name__"!==i.field.fieldPath){var a=t[i.field.fieldPath];a&&n.push(E(a))}else n.push({referenceValue:t.__meta__.name})}}catch(t){o.e(t)}finally{o.f()}return{values:n,before:!0}},startAt:function(t,e){return this.documentToCursor(t,e)},endAt:function(t,e){return this.startAt(t,e)}},jt=["select","from","where","orderBy","startAt","endAt","offset","limit"],St=function(){function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(x(this,t),this.parent=e,this.options={select:[],where:[],orderBy:[]},!b("doc",e))throw Error("Expected parent to be a reference to a document");var o,i=R(jt);try{var a=function(){var t=o.value,e=n[t];if(t in n){if("where"===t&&Array.isArray(e[0])||"orderBy"===t&&Array.isArray(e))return e.forEach((function(e,n){try{r[t](e)}catch(e){throw Error('Invalid argument "'.concat(t,"[").concat(n,']": ').concat(e.message))}})),"continue";try{r[t](e)}catch(e){throw Error('Invalid argument "'.concat(t,'": ').concat(e.message))}}};for(i.s();!(o=i.n()).done;)a()}catch(t){i.e(t)}finally{i.f()}}var e,r,n,o,i;return e=t,r=[{key:"select",value:function(t){var e=this;if(!Array.isArray(t))throw Error("Expected argument to be an array of field paths");t.forEach((function(t,r){if("string"!=typeof t)throw Error("Field path at index [".concat(r,"] is not a string"));e.options.select.push(t)}))}},{key:"from",value:function(t){var e=t.collectionId,r=void 0===e?t:e,n=t.allDescendants;if("string"!=typeof r)throw Error('Expected "collectionId" to be a string');if(void 0!==n&&"boolean"!=typeof n)throw Error('Expected the "allDescendants" to be a boolean');return this.options.from={collectionId:r,allDescendants:n},this}},{key:"where",value:function(t){var e=Array.isArray(t)?t:arguments;return M(e),this.options.where.push(e),this}},{key:"orderBy",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",r={asc:"ASCENDING",desc:"DESCENDING"},n=t.field,o=void 0===n?t:n,i=t.direction,a=void 0===i?e:i;if(a=r[a],"string"!=typeof o)throw Error('"field" property needs to be a string');if(void 0===a)throw Error('"direction" property can only be "asc" or "desc"');return this.options.orderBy.push({field:{fieldPath:o},direction:a}),this}},{key:"startAt",value:function(t){if(!(t instanceof gt))throw Error("Expected a Document instance");return this.options.startAt=t,this}},{key:"endAt",value:function(t){if(!(t instanceof gt))throw Error("Expected a Document instance");return this.options.endAt=t,this}},{key:"offset",value:function(t){if(!w(t))throw Error("Expected an integer that is greater than 0");return this.options.offset=t,this}},{key:"limit",value:function(t){if(!w(t))throw Error("Expected an integer that is greater than 0");return this.options.limit=t,this}},{key:"run",value:(o=function*(){var t,e=this,r=yield this.parent.db.fetch(this.parent.endpoint+":runQuery",{method:"POST",body:JSON.stringify(this)});return(null===(t=r[0])||void 0===t?void 0:t.document)||r.splice(0,1),r.map((function(t){return new gt(t.document,e.parent.db)}))},i=function(){var t=this,e=arguments;return new Promise((function(r,n){function i(t){N(u,r,n,i,a,"next",t)}function a(t){N(u,r,n,i,a,"throw",t)}var u=o.apply(t,e);i(void 0)}))},function(){return i.apply(this,arguments)})},{key:"toJSON",value:function(){var t={};for(var e in this.options){var r=this.options[e];t[e]=e in Ot?Ot[e](r,this.options):r}return{structuredQuery:t}}}],r&&C(e.prototype,r),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Pt=function(t){function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(B(this,e),void 0===r)throw Error('The "reference" argument is required when creating a List');if(!r.isCollection)throw Error("The reference in a list should point to a collection");var o=t.documents,i=t.nextPageToken;this.ref=r,this.options=n,this.documents=o?o.map((function(t){return new gt(t,r.db)})):[],this.options.pageToken=i}var r,n,o;return r=e,(n=[{key:"getNextPage",value:function(){return this.ref.list(this.options)}},{key:t,value:function(){var t=this,e=0;return{next:function(){return e<t.documents.length?{value:t.documents[e++],done:!1}:{done:!0}}}}}])&&F(r.prototype,n),o&&F(r,o),Object.defineProperty(r,"prototype",{writable:!1}),e}(Symbol.iterator),At=function(){function t(e,r){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.db=r,"string"!=typeof e)throw Error('The "path" argument should be a string');e=h(e),this.id=null!==(n=e.split("/").pop())&&void 0!==n?n:"",this.path=e,this.name="".concat(r.rootPath,"/").concat(e),this.endpoint="".concat(r.endpoint,"/").concat(e),this.isRoot=""===e}var e,r,n,o,i,a,u,c,l,s;return e=t,r=[{key:"parent",get:function(){if(this.isRoot)throw Error("Can't get the parent of root");return new t(this.path.replace(/\/?([^/]+)\/?$/,""),this.db)}},{key:"parentCollection",get:function(){if(this.isRoot)throw Error("Can't get parent of a root collection");return this.isCollection?new t(this.path.replace(/(\/([^/]+)\/?){2}$|^([^/]+)$/,""),this.db):this.parent}},{key:"isCollection",get:function(){return v("col",this.path)}},{key:"child",value:function(e){return e=e.replace(/^\/?/,""),new t("".concat(this.path,"/").concat(e),this.db)}},{key:"transact",value:(s=$((function*(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this.db.transaction(),o=n[t](this,e,r);return yield n.commit().then((function(){return o}))})),function(t,e){return s.apply(this,arguments)})},{key:"list",value:(l=$((function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g("col",this),new Pt(yield this.db.fetch(this.endpoint+O(S(t))),this,t)})),function(){return l.apply(this,arguments)})},{key:"get",value:(c=$((function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g("doc",this),new gt(yield this.db.fetch(this.endpoint+O(S(t))),this.db)})),function(){return c.apply(this,arguments)})},{key:"add",value:(u=$((function*(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g("col",this),this.transact("add",t,e)})),function(t){return u.apply(this,arguments)})},{key:"set",value:(a=$((function*(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g("doc",this),this.transact("set",t,e)})),function(t){return a.apply(this,arguments)})},{key:"update",value:(i=$((function*(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return g("doc",this),this.transact("update",t,e)})),function(t){return i.apply(this,arguments)})},{key:"delete",value:(o=$((function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g("doc",this),this.transact("delete",t)})),function(){return o.apply(this,arguments)})},{key:"query",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return g("col",this),new St(this.parent,J({from:{collectionId:this.id}},t))}},{key:"toJSON",value:function(){return{referenceValue:this.name}}}],r&&Q(e.prototype,r),n&&Q(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Et=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.db=e,this.writes=[],this.preconditions={}}var e,r,n,o,i;return e=t,r=[{key:"write",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("object"!==Z(e))throw Error("The data argument is missing");var n=[],o="".concat(this.db.rootPath,"/").concat(m(t)),i=this.preconditions[o],a=_(t instanceof gt?t:e,n);r=S(r,e),i&&(r.currentDocument=i),a.name=o,this.writes.push(z({update:a},r)),n.length&&this.writes.push({transform:{document:a.name,fieldTransforms:n}})}},{key:"get",value:(i=W((function*(t){var e=this,r=yield this.db.batchGet(t);return r.forEach((function(t){var r=t.__meta__||{name:t.__missing__},n=r.updateTime;e.preconditions[r.name]=n?{updateTime:n}:{exists:!1}})),r})),function(t){return i.apply(this,arguments)})},{key:"add",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n="".concat(g("col",t),"/").concat(k());return this.write(n,e,z({exists:!1},r)),this.db.ref(n)}},{key:"set",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};g("doc",t),this.write(t,e,r)}},{key:"update",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};g("doc",t),this.write(t,e,z({exists:!0,updateMask:!0},r))}},{key:"delete",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r="".concat(this.db.rootPath,"/").concat(g("doc",t));e=S(e),this.preconditions[r]&&(e.currentDocument=this.preconditions[r]),this.writes.push(z({delete:r},e))}},{key:"commit",value:(o=W((function*(){this.preconditions={},yield this.db.fetch(this.db.endpoint+":commit",{method:"POST",body:JSON.stringify({writes:this.writes})})})),function(){return o.apply(this,arguments)})}],r&&tt(e.prototype,r),n&&tt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),_t=function(){function t(e){var r=e.projectId,n=e.auth,o=e.name,i=void 0===o?"(default)":o,a=e.host,u=void 0===a?"firestore.googleapis.com":a,c=e.ssl,l=void 0===c||c;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),void 0===r)throw Error('Database constructor expected the "config" argument to have a valid "projectId" property');this.name=i,this.auth=n,this.rootPath="projects/".concat(r,"/databases/").concat(i,"/documents"),this.endpoint="http".concat(l?"s":"","://").concat(u,"/v1/").concat(this.rootPath)}var e,r,n,o,i;return e=t,r=[{key:"fetch",value:function(t){function e(e,r){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t,e){return this.auth&&this.auth.authorizedRequest?this.auth.authorizedRequest(t,e).then(ct):fetch(t,e).then(ct)}))},{key:"ref",value:function(t){return t instanceof gt&&(t=t.__meta__.path),new At(t,this)}},{key:"batchGet",value:(i=ut((function*(t){var e=this;return(yield this.fetch(this.endpoint+":batchGet",{method:"POST",body:JSON.stringify({documents:t.map((function(t){var r=g("doc",t);return"".concat(e.rootPath,"/").concat(r)}))})})).map((function(t){return t.found?new gt(t.found,e):Object.defineProperty({},"__missing__",{value:t.missing})}))})),function(t){return i.apply(this,arguments)})},{key:"transaction",value:function(){return new Et(this)}},{key:"runTransaction",value:(o=ut((function*(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,r=new Et(this);e>0;){yield t(r);try{yield r.commit();break}catch(t){if(0===e||"NOT_FOUND"!==t.status&&"FAILED_PRECONDITION"!==t.status)throw Error(t)}e--}})),function(t){return o.apply(this,arguments)})},{key:"collectionGroup",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new St(this.ref("parent"in e?e.parent:""),nt({from:{collectionId:t,allDescendants:!0}},e))}}],r&&it(e.prototype,r),n&&it(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),kt=["syncStatus"],Tt=["syncStatus"],Dt=new _t({projectId:"thucdia-e52ff"}),It="prod",Nt=function(){var t=ht((function*(t,e,r){var n=Dt.ref("".concat(It,"--").concat(t,"/").concat(e.surveyId)),o=yt(e,kt);return yield n.set(ft(ft({},o),{},{machineId:r}))}));return function(e,r,n){return t.apply(this,arguments)}}(),xt=function(){var t=ht((function*(t,e,r){var n=Dt.ref("".concat(It,"--").concat(t,"/").concat(e.surveyDataId)),o=yt(e,Tt);return yield n.set(ft(ft({},o),{},{machineId:r}))}));return function(e,r,n){return t.apply(this,arguments)}}(),Ct=function(){var t=ht((function*(t,e){switch(t.type){case"survey":return yield Nt(t.type,t.payload,e);case"surveyData":case"surveyRevision":return yield xt(t.type,t.payload,e)}}));return function(e,r){return t.apply(this,arguments)}}()},pFNu:function(t,e){"use strict";e.a={wrapper:"wrapper__1x8n1",header:"header__3tjqy",syncStatus:"syncStatus__29ty1"}},"q/Mr":function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));var n=r("7SJd"),o="voser__machineId",i=function(){var t=window.localStorage.getItem(o);if(t)return t;var e=Object(n.c)();return window.localStorage.setItem(o,e),e}}}]);
//# sourceMappingURL=route-quan-li.chunk.5a5fc.js.map