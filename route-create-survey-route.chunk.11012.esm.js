(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"/Zpy":function(t,e){"use strict";e.a={notfound:"notfound__1Mgab"}},"4Ecs":function(t,e){"use strict";e.a={spinner:"spinner__3xt9E",spin:"spin__2BBia",delay:"delay__3sfhE"}},"7SJd":function(t,e,s){"use strict";function r(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}s.d(e,"c",(function(){return c})),s.d(e,"a",(function(){return i})),s.d(e,"b",(function(){return o}));var a=s("6+U4"),n=s("9Qv7");const c=n.a;let i;!function(t){t[t.NotSync=0]="NotSync",t[t.Synced=1]="Synced"}(i||(i={}));const o=new class extends a.a{constructor(){super("Voser"),r(this,"list",void 0),r(this,"data",void 0),r(this,"revision",void 0),this.version(4).stores({record_list:"surveyId, surveyType, createdAt",record_data:"[surveyId+surveyForm]"}),this.version(5).stores({record_list:"surveyId, surveyType, createdAt, syncStatus",record_data:"[surveyId+surveyForm], syncStatus",record_revisions:"surveyDataId, syncStatus, surveyDataId"}).upgrade((t=>t.record_data.toCollection().modify((t=>{t.syncStatus=i.NotSync,void 0===t.surveyDataId&&(t.surveyDataId=Object(n.a)())})))),this.version(6).stores({record_list:"surveyId, surveyType, createdAt, syncStatus",record_data:"[surveyId+surveyForm], syncStatus",record_revisions:"surveyDataId, syncStatus, surveyDataId"}).upgrade((t=>t.record_list.toCollection().modify((t=>{t.syncStatus=i.NotSync})))),this.list=this.table("record_list"),this.data=this.table("record_data"),this.revision=this.table("record_revisions")}}},UTjy:function(t,e,s){"use strict";(function(t){s.d(e,"a",(function(){return n}));var r=s("ox/y"),a=s("/Zpy");const n=({title:e,explain:s})=>t("div",{class:a.a.notfound},t("h1",null,e),s&&t("p",null,s),t(r.Link,{href:"/"},t("h4",null,"Quay lại trang chủ")))}).call(this,s("hosL").h)},W8jr:function(t,e,s){"use strict";(function(t){s.d(e,"a",(function(){return c}));var r=s("l8WD"),a=s("4Ecs"),n=s("JMg7");const c=()=>{const[e,s]=Object(r.useState)(!1);return Object(r.useEffect)((()=>{s(!0)}),[]),t("div",{className:Object(n.a)({[a.a.spinner]:!0,[a.a.delay]:e})})}}).call(this,s("hosL").h)},eucj:function(t,e,s){"use strict";s.d(e,"b",(function(){return a})),s.d(e,"c",(function(){return n})),s.d(e,"a",(function(){return c}));var r=s("7SJd");const a=async(t,e)=>{const s=await r.b.data.get([t,e]);return"tieu_hoc_form"===e&&void 0===s?await r.b.data.get([t,"mau_giao_form"]):s},n=async(t,e,s)=>await r.b.transaction("rw",["record_data","record_revisions"],(async()=>{const a={surveyDataId:Object(r.c)(),surveyId:t,surveyForm:e,data:s,syncStatus:r.a.NotSync};await r.b.data.put(a,[t,e]),await r.b.revision.add(a,a.surveyDataId)})),c=async t=>await r.b.list.add({surveyId:Object(r.c)(),surveyType:t,createdAt:Date.now(),syncStatus:r.a.NotSync})},pjSh:function(t,e,s){"use strict";s.r(e),function(t){var r=s("l8WD"),a=s("eucj"),n=s("Y3FI"),c=s("W8jr"),i=s("UTjy");e.default=({surveyType:e})=>{const[s,o]=Object(r.useState)({type:"initial"});switch(Object(r.useEffect)((()=>{Object(a.a)(e).then((t=>{Object(n.route)(`/survey/${t}`,!0)})).catch((t=>{console.error(t),o({type:"error",payload:t.message})}))}),[e]),s.type){case"initial":return t("div",{className:"wrapper"},t(c.a,null));case"error":return t("div",{className:"wrapper"},t(i.a,{title:"Đã có lỗi xảy ra",explain:s.payload}))}}}.call(this,s("hosL").h)}}]);
//# sourceMappingURL=route-create-survey-route.chunk.11012.esm.js.map